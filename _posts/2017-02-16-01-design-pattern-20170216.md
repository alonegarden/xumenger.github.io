---
layout: post
title: 从零开始设计模式
categories: 深入学习之设计模式 
tags: 设计模式 面向对象
---

>首先推荐以下资料：王垠的[《解密“设计模式”》](http://www.yinwang.org/blog-cn/2013/03/07/design-patterns)、[《设计模式有何不妥，所谓的荼毒体现在哪？》](https://www.zhihu.com/question/23757237)，在了解设计模式之前先看看关于它的另一种态度

>黑设计模式主要是黑很多人为了使用设计模式而使用设计模式，最后为了输出Hello World，可能要编写数百行代码，获取一些完全不必要的灵活性，简直是自己找罪受。确实，不是代码越多你越牛逼，而应该是为了做出同样的功能，越简单越好，简单意味着代码好理解，好维护，自然扩展起来相对也就容易

>一个人的学习能力应该体现在如何将看似复杂、看似牛逼的东西用自己的思考去解构、简单化，去掉被众人谣传而产生的神秘面纱，看到知识最本质的样子

我不管是盲目吹捧，还是讽刺。我只知道这玩意儿是有用的，那么就有必要去花些时间精力研究它

最近开发一个轻量级的爬虫框架，越来越发现在做一个框架级的项目不像做业务开发那样针对业务逻辑编程、能实现功能就好了，需要有诸多层面的考虑，要考虑程序的可扩展性、易维护性、编码时逻辑的清晰度等。所以不得不考虑到应用设计模式了

学习最怕不知道学的东西有什么用，这也往往是初学者难以坚持、学习不深刻的原因。现在既然越来越感受到设计模式的重要，不妨依次为契机好好学习、梳理、应用

##设计模式简介

关于设计模式的书、网络上相关的博客实在是很多，我在这篇文章中的整理主要是参考[《设计模式》](http://www.runoob.com/design-pattern/design-pattern-tutorial.html)

设计模式主要基于以下的面向对象设计原则

* 对接口编程而不是对实现编程
* 优先使用对象组合而不是继承

针对23种设计模式，大概可以分为三大类，另外还有J2EE模式

**创建型模式**

这些设计模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用新的运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活

* 工厂模式
* 抽象工厂模式
* 单例模式
* 建造者模式
* 原型模式

**结构性模式**

这些设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式

* 适配器模式
* 桥接模式
* 过滤器模式
* 组合模式
* 装饰器模式
* 外观模式
* 享元模式
* 代理模式

**行为模式**

这些设计模式特别关注对象之间的通信

* 责任链模式
* 命令模式
* 解释器模式
* 迭代器模式
* 中介者模式
* 备忘录模式
* 观察者模式
* 状态模式
* 空对象模式
* 策略模式
* 模板模式
* 访问者模式

**J2EE模式**

这些设计模式特别关注表示层。这些模式是由Sun Java Center鉴定的

* MVC模式
* 业务代表模式
* 组合实体模式
* 数据访问对象模式
* 前端控制器模式
* 拦截过滤器模式
* 服务定位器模式
* 传输对象模式

下面用一个图片来整体描述一下设计模式之间的关系

![image](../media/image/2017-02-16/01.jpg)

##设计模式的六大原则

**开闭原则**。对扩展开放，对修改关闭。在程序需要进行扩展的时候，不用去修改原有的代码，实现一个热插拔的效果。简而言之，是为了使我们的程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类

**里氏代换原则（LSP）**。任何基类可以出现的地方，子类一定可以出现。LSP是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范

**依赖倒置原则**。这个原则是开闭原则的基础，具体内容是：针对接口编程，依赖抽象而不依赖于具体

**接口隔离原则**。使用多个隔离的接口，笔使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合

**迪米特法则（最少知道原则）**。一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立

**合成复用原则**。尽量使用合成/聚合的方式，而不是使用继承

>死记硬背是没有用的，等到自己在设计、开发程序的时候
