---
layout: post
title: 用AspectJ进行AOP编程
categories: java之web开发 java之web框架 
tags: Java AspectJ AOP Spring Web HTTP 面向切面编程 AJDT 编译 Eclipse Python 装饰器 装饰器设计模式
---

AOP 是Aspect Oriented Programming 的缩写，中文的意思是**面向切面编程**！可以在运行时动态地将代码切入到累中指定方法、指定位置上！

其实就是把**横切逻辑**从**业务逻辑**中抽取出来。哪些属于**横切逻辑**呢？比如，性能监控、日志、事务管理、权限控制等等

>多说一句，在Python 中要想在不修改原有业务代码的基础上，添加记录日志等额外功能，我们可能想到使用装饰器来实现！而在Java 中，AOP 好像是一个更主流的选择！

## 在Eclipse上搭建AspectJ环境

去[https://www.eclipse.org/ajdt/downloads/index.php](https://www.eclipse.org/ajdt/downloads/index.php)下载AJDT 插件

注意，选择匹配你的Eclipse 版本的AJDT 插件，否则会出现无法安装的问题

![](../media/image/2018-12-04/01.png)

我当前的Eclipse 版本是4.9，但是现在[https://www.eclipse.org/ajdt/downloads/index.php](https://www.eclipse.org/ajdt/downloads/index.php)没有对应4.9 版本的，试了一下4.8，不错，没有遇到安装失败的问题

在Eclipse 安装。【Help】->【Install New Software...】

![](../media/image/2018-12-04/02.png)

按照提示（如果版本不匹配，会出现某几个无法安装的问题），安装完成！！

## 开发一个AspectJ项目

首先去创建一个AspectJ 项目，【File】->【New】->【Other】->【AspectJ Project】

![](../media/image/2018-12-04/03.png)

新建一个Java 类，实现代码如下

```java
package testAOP;

package test;

public class Person {

    private String name;
    private int age;
    
    public String getName() {
        return this.name;
    }
    
    public void setName(String name) {
        System.out.println("set name");
        this.name = name;
    }
    
    public int getAge() {
        return this.age;
    }
    
    public void setAge(int age) {
        System.out.println("set age");
        this.age = age;
    }
}
```

再创建一个Aspect，【New】->【Other】->【AspectJ】

![](../media/image/2018-12-04/04.png)

编写AOP.aj 代码如下

```aj
package test;

public aspect AOP {
    
    pointcut setXXX():
        call(public void Person.set*(*));
    
    before(): setXXX() {
        System.out.println("面向切面编程");
    }
}
```

然后编写测试代码如下

```java
package test;

public class Test {
    public static void main(String[] args) {
        Person p = new Person();
        p.setName("xumenger");
        p.setAge(18);
    }
}
```

运行效果是这样的

![](../media/image/2018-12-04/05.png)

## AspectJ语法



## 参考资料

* [漫谈AOP开发之初探AOP及AspectJ的用法](http://www.cnblogs.com/lihuidu/p/5802662.html)
* [AspectJ的一个简单例子](http://yangjunfeng.iteye.com/blog/398028)
* [在eclipse中使用Aspectj](https://blog.csdn.net/u010513756/article/details/51804190)
* [轻松理解AOP思想(面向切面编程)](https://www.cnblogs.com/Wolfmanlq/p/6036019.html)
* [如何简单的实现 AOP](https://blog.csdn.net/kiss_xiaojie/article/details/80380548)
* [AspectJ 学习笔记](https://blog.csdn.net/csdn_terence/article/details/55804421)