---
layout: post
title: RSA签名与加密原理
categories: 网络安全之web安全 
tags: RSA 加密 签名 验签 解密 密码 安全 网络安全 数据安全 通信 对称加密 非对称加密 公钥 私钥 国密 SM2 SM4
---

RSA 加密是一种非对称加密。可以在不直接传递密钥的情况下完成加密。这能够确保信息的安全性，避免直接传递密钥所造成的被破解的风险

是由一对密钥来进行加解密的过程，分别称为公钥和私钥。两者之间有数学相关，该加密算法的原理就是对以极大整数做因数分解的困难性来保证安全性的

通常个人保存私钥、公钥匙公开的（也可以同时多人持有）

加密是为了防止信息被泄漏，而签名是为了防止信息被篡改

## 加密

比如A要传递一条信息给B

RSA 加密的过程如下：

1. B生成一对密钥（公钥和私钥），私钥不公开，B自己保留；公钥匙公开的，任何人都可以获取
2. B传递自己的公钥给A，A用B的公钥对消息进行加密
3. B收到A加密的消息，利用B自己的私钥对消息进行解密

在这个过程中，只有2次传递过程，第一次是B传递公钥给A，第二次是A传递加密消息给A。即使都被别人截获，也没有危险性，因为只有B的私钥才能对消息进行解密，防止消息内容被泄漏

>但是存在这样的风险，C截获了B给A的公钥，C用公钥加密消息后发送消息给B，这样B用私钥可以解析出消息的内容，这样就存在C骗B的风险

## 签名

B收到A的消息后，需要回复“收到”

RSA签名的过程如下

1. B生成一对密钥（公钥和私钥），私钥不公开，B自己保留；公钥匙公开的，任何人都可以获取
2. B用自己的私钥对消息加签，形成签名，并将加签的消息和消息本身一起传递给A
3. A收到消息后，使用B的公钥进行验签，如果验签出来的内容与消息本身一致，证明消息是B回复的

在这个过程中，只有2次传递过程，第一次是B传递加签的消息和消息本身给B，第二次是A获取B的公钥。即使都被截获，也没有危险，因为只有B的私钥才能对消息进行签名，即使知道消息的内容，也没有办法伪造带签名的回复给A，防止了消息内容的篡改

>但是存在这样的风险，虽然截获的消息不能被篡改，但是消息的内容可以利用公钥验签来获得，并不能方式泄漏

## 加密与签名

在实际的应用场景中，一般会同时使用加密和签名。比如A和B分别生成一套自己的公钥和私钥，A将自己的公钥给B，B将自己的公钥给A

当A要发消息给B时，先使用A的私钥对消息加签名（一般是信息的摘要），再用B的公钥对消息内容和签名信息进行加密

B收到消息后，用自己的私钥解密加密后的内容，得到明文后用A的公钥解签A用A自己的私钥的签名

这样既保证不被泄漏，也保证不被篡改

>公钥加密、私钥解密

>私钥签名、公钥验签

>这里的例子是加密和加签都是使用RSA算法，实际中可能用RSA做签名，用SM2国密算法加密

>思考题1：签名和加密的顺序要求？

>思考题2:非对称加密算法的性能考量！

## 参考资料

* [RSA加密、解密、签名、验签的原理及方法](https://www.cnblogs.com/super-ldc/p/10855266.html)
* [企业加密方案指南](https://www.freebuf.com/column/184582.html)
* [RSA加密、解密、签名、验签的原理及方法](https://www.cnblogs.com/pcheng/p/9629621.html)
* [加密解密、加签验签](https://www.iteye.com/blog/franciswmf-2437437)
* [SM2算法对比RSA算法，有哪些优势？](https://www.wosign.com/News/news_2019061101.htm)
* [SM2和RSA比较](https://blog.csdn.net/yinganan90/article/details/13772309)
* [【国密算法那点事儿】解读DES和SM4、RSA和SM2及SM3](http://home.eeworld.com.cn/home.php?mod=space&uid=346593&do=blog&id=361344)
* [签名和加密](https://blog.csdn.net/qq_19924881/article/details/78622185)